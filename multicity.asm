
*=$3800
        BYTE    60,102,110,110,96,98,60,0
        BYTE    24,52,98,126,98,98,98,0
        BYTE    124,98,98,124,98,98,124,0
        BYTE    60,98,96,96,96,98,60,0
        BYTE    120,100,98,98,98,100,120,0
        BYTE    126,96,96,120,96,96,126,0
        BYTE    126,96,96,120,96,96,96,0
        BYTE    60,98,96,110,98,98,60,0
        BYTE    98,98,98,126,98,98,98,0
        BYTE    126,24,24,24,24,24,126,0
        BYTE    30,12,12,12,76,76,56,0
        BYTE    98,100,104,112,104,100,98,0
        BYTE    96,96,96,96,96,96,126,0
        BYTE    98,118,106,98,98,98,98,0
        BYTE    98,114,106,102,98,98,98,0
        BYTE    60,98,98,98,98,98,60,0
        BYTE    124,98,98,124,96,96,96,0
        BYTE    60,98,98,98,106,60,8,0
        BYTE    124,98,98,124,104,100,98,0
        BYTE    60,98,96,60,2,98,60,0
        BYTE    126,24,24,24,24,24,24,0
        BYTE    98,98,98,98,98,98,60,0
        BYTE    98,98,98,98,98,52,24,0
        BYTE    98,98,98,98,106,118,98,0
        BYTE    98,98,52,24,52,98,98,0
        BYTE    98,98,98,60,24,24,24,0
        BYTE    126,98,4,8,16,34,126,0
        BYTE    60,48,48,48,48,48,60,0
        BYTE    12,18,48,124,48,98,252,0
        BYTE    60,12,12,12,12,12,60,0
        BYTE    0,24,60,126,24,24,24,24
        BYTE    0,16,48,127,127,48,16,0
        BYTE    0,0,0,0,0,0,0,0
        BYTE    24,24,24,24,0,0,24,0
        BYTE    102,102,102,0,0,0,0,0
        BYTE    102,102,255,102,255,102,102,0
        BYTE    24,62,96,60,6,124,24,0
        BYTE    98,102,12,24,48,102,70,0
        BYTE    60,102,60,56,103,102,63,0
        BYTE    6,12,24,0,0,0,0,0
        BYTE    12,24,48,48,48,24,12,0
        BYTE    48,24,12,12,12,24,48,0
        BYTE    0,102,60,255,60,102,0,0
        BYTE    0,24,24,126,24,24,0,0
        BYTE    0,0,0,0,0,24,24,48
        BYTE    0,0,0,126,0,0,0,0
        BYTE    0,0,0,0,0,24,24,0
        BYTE    0,3,6,12,24,48,96,0
        BYTE    60,66,66,90,66,66,60,0
        BYTE    8,24,40,8,8,8,126,0
        BYTE    60,66,2,28,32,66,126,0
        BYTE    60,66,2,12,2,66,60,0
        BYTE    4,12,20,36,126,4,4,0
        BYTE    126,64,124,2,2,66,60,0
        BYTE    60,66,64,124,66,66,60,0
        BYTE    126,2,4,8,60,16,16,0
        BYTE    24,36,36,60,66,66,60,0
        BYTE    60,66,66,62,2,66,60,0
        BYTE    0,0,24,0,0,24,0,0
        BYTE    0,0,24,0,0,24,24,48
        BYTE    14,24,48,96,48,24,14,0
        BYTE    0,0,126,0,126,0,0,0
        BYTE    112,24,12,6,12,24,112,0
        BYTE    60,102,6,12,24,0,24,0
        BYTE    0,0,0,255,255,0,0,0
        BYTE    8,28,62,127,127,28,62,0
        BYTE    24,24,24,24,24,24,24,24
        BYTE    0,0,0,255,255,0,0,0
        BYTE    0,0,255,255,0,0,0,0
        BYTE    0,255,255,0,0,0,0,0
        BYTE    0,0,0,0,255,255,0,0
        BYTE    48,48,48,48,48,48,48,48
        BYTE    12,12,12,12,12,12,12,12
        BYTE    0,0,0,0,128,64,32,16
        BYTE    0,0,0,0,1,2,4,8
        BYTE    16,32,64,128,0,0,0,0
        BYTE    17,32,68,136,17,2,68,136
        BYTE    17,32,36,72,73,65,73,73
        BYTE    0,7,24,32,33,64,72,73
        BYTE    255,0,0,221,0,0,255,0
        BYTE    73,65,73,73,73,65,73,73
        BYTE    201,0,0,193,0,0,201,73
        BYTE    0,0,0,0,0,255,255,0
        BYTE    54,127,127,127,62,28,8,0
        BYTE    96,96,96,96,96,96,96,96
        BYTE    8,4,2,1,0,0,0,0
        BYTE    195,231,126,60,60,126,231,195
        BYTE    0,60,126,102,102,126,60,0
        BYTE    24,24,102,102,24,24,60,0
        BYTE    6,6,6,6,6,6,6,6
        BYTE    8,28,62,127,62,28,8,0
        BYTE    213,85,93,0,170,85,0,112
        BYTE    192,192,48,48,192,192,48,48
        BYTE    24,24,24,24,24,24,24,24
        BYTE    0,0,3,62,118,54,54,0
        BYTE    255,127,63,31,15,7,3,1
        BYTE    0,0,0,0,0,0,0,0
        BYTE    240,240,240,240,240,240,240,240
        BYTE    0,0,0,0,255,255,255,255
        BYTE    255,0,0,0,0,0,0,0
        BYTE    100,138,138,74,42,42,196,0
        BYTE    140,138,138,138,138,138,236,0
        BYTE    204,204,51,51,204,204,51,51
        BYTE    3,3,3,3,3,3,3,3
        BYTE    0,0,0,0,204,204,51,51
        BYTE    255,254,252,248,240,224,192,128
        BYTE    3,3,3,3,3,3,3,3
        BYTE    141,133,153,128,138,149,128,128
        BYTE    0,0,0,0,15,15,15,15
        BYTE    128,190,162,162,162,190,128,255
        BYTE    255,3,5,249,9,9,201,73
        BYTE    0,0,0,0,0,0,255,255
        BYTE    31,32,64,255,128,128,141,145
        BYTE    136,251,2,250,170,171,168,255
        BYTE    255,0,0,255,0,0,93,85
        BYTE    201,9,9,9,137,73,9,9
        BYTE    192,192,192,192,192,192,192,192
        BYTE    224,224,224,224,224,224,224,224
        BYTE    7,7,7,7,7,7,7,7
        BYTE    255,255,0,0,0,0,0,0
        BYTE    255,255,255,0,0,0,0,0
        BYTE    24,40,88,60,26,24,36,36
        BYTE    0,85,85,37,35,0,64,128
        BYTE    0,69,109,84,69,0,0,0
        BYTE    0,174,168,170,110,0,64,128
        BYTE    9,233,41,41,41,234,12,248
        BYTE    24,8,90,60,24,24,36,36
        BYTE    0,24,24,60,90,24,36,36
        BYTE    195,153,145,145,159,153,195,255
        BYTE    231,195,153,129,153,153,153,255
        BYTE    131,153,153,131,153,153,131,255
        BYTE    195,153,159,159,159,153,195,255
        BYTE    135,147,153,153,153,147,135,255
        BYTE    129,159,159,135,159,159,129,255
        BYTE    129,159,159,135,159,159,159,255
        BYTE    195,153,159,145,153,153,195,255
        BYTE    153,153,153,129,153,153,153,255
        BYTE    195,231,231,231,231,231,195,255
        BYTE    225,243,243,243,243,147,199,255
        BYTE    153,147,135,143,135,147,153,255
        BYTE    159,159,159,159,159,159,129,255
        BYTE    156,136,128,148,156,156,156,255
        BYTE    153,137,129,129,145,153,153,255
        BYTE    195,153,153,153,153,153,195,255
        BYTE    131,153,153,131,159,159,159,255
        BYTE    195,153,153,153,153,195,241,255
        BYTE    131,153,153,131,135,147,153,255
        BYTE    195,153,159,195,249,153,195,255
        BYTE    129,231,231,231,231,231,231,255
        BYTE    153,153,153,153,153,153,195,255
        BYTE    153,153,153,153,153,195,231,255
        BYTE    156,156,156,148,128,136,156,255
        BYTE    153,153,195,231,195,153,153,255
        BYTE    153,153,153,195,231,231,231,255
        BYTE    129,249,243,231,207,159,129,255
        BYTE    195,207,207,207,207,207,195,255
        BYTE    243,237,207,131,207,157,3,255
        BYTE    195,243,243,243,243,243,195,255
        BYTE    255,231,195,129,231,231,231,231
        BYTE    255,239,207,128,128,207,239,255
        BYTE    255,255,255,255,255,255,255,255
        BYTE    231,231,231,231,255,255,231,255
        BYTE    153,153,153,255,255,255,255,255
        BYTE    153,153,0,153,0,153,153,255
        BYTE    231,193,159,195,249,131,231,255
        BYTE    157,153,243,231,207,153,185,255
        BYTE    195,153,195,199,152,153,192,255
        BYTE    249,243,231,255,255,255,255,255
        BYTE    243,231,207,207,207,231,243,255
        BYTE    207,231,243,243,243,231,207,255
        BYTE    255,153,195,0,195,153,255,255
        BYTE    255,231,231,129,231,231,255,255
        BYTE    255,255,255,255,255,231,231,207
        BYTE    255,255,255,129,255,255,255,255
        BYTE    255,255,255,255,255,231,231,255
        BYTE    255,252,249,243,231,207,159,255
        BYTE    195,153,145,137,153,153,195,255
        BYTE    231,231,199,231,231,231,129,255
        BYTE    195,153,249,243,207,159,129,255
        BYTE    195,153,249,227,249,153,195,255
        BYTE    249,241,225,153,128,249,249,255
        BYTE    129,159,131,249,249,153,195,255
        BYTE    195,153,159,131,153,153,195,255
        BYTE    129,153,243,231,231,231,231,255
        BYTE    195,153,153,195,153,153,195,255
        BYTE    195,153,153,193,249,153,195,255
        BYTE    255,255,231,255,255,231,255,255
        BYTE    255,255,231,255,255,231,231,207
        BYTE    241,231,207,159,207,231,241,255
        BYTE    255,255,129,255,129,255,255,255
        BYTE    143,231,243,249,243,231,143,255
        BYTE    195,153,249,243,231,255,231,255
        BYTE    255,255,255,0,0,255,255,255
        BYTE    247,227,193,128,128,227,193,255
        BYTE    231,231,231,231,231,231,231,231
        BYTE    255,255,255,0,0,255,255,255
        BYTE    255,255,0,0,255,255,255,255
        BYTE    255,0,0,255,255,255,255,255
        BYTE    255,255,255,255,0,0,255,255
        BYTE    207,207,207,207,207,207,207,207
        BYTE    243,243,243,243,243,243,243,243
        BYTE    255,255,255,31,15,199,231,231
        BYTE    231,231,227,240,248,255,255,255
        BYTE    231,231,199,15,31,255,255,255
        BYTE    63,63,63,63,63,63,0,0
        BYTE    63,31,143,199,227,241,248,252
        BYTE    252,248,241,227,199,143,31,63
        BYTE    0,0,63,63,63,63,63,63
        BYTE    0,0,252,252,252,252,252,252
        BYTE    255,195,129,129,129,129,195,255
        BYTE    255,255,255,255,255,0,0,255
        BYTE    201,128,128,128,193,227,247,255
        BYTE    159,159,159,159,159,159,159,159
        BYTE    255,255,255,248,240,227,231,231
        BYTE    60,24,129,195,195,129,24,60
        BYTE    255,195,129,153,153,129,195,255
        BYTE    231,231,153,153,231,231,195,255
        BYTE    249,249,249,249,249,249,249,249
        BYTE    247,227,193,128,193,227,247,255
        BYTE    231,231,231,0,0,231,231,231
        BYTE    63,63,207,207,63,63,207,207
        BYTE    231,231,231,231,231,231,231,231
        BYTE    255,255,252,193,137,201,201,255
        BYTE    0,128,192,224,240,248,252,254
        BYTE    255,255,255,255,255,255,255,255
        BYTE    15,15,15,15,15,15,15,15
        BYTE    255,255,255,255,0,0,0,0
        BYTE    0,255,255,255,255,255,255,255
        BYTE    255,255,255,255,255,255,255,0
        BYTE    63,63,63,63,63,63,63,63
        BYTE    51,51,204,204,51,51,204,204
        BYTE    252,252,252,252,252,252,252,252
        BYTE    255,255,255,255,51,51,204,204
        BYTE    0,1,3,7,15,31,63,127
        BYTE    252,252,252,252,252,252,252,252
        BYTE    231,231,231,224,224,231,231,231
        BYTE    255,255,255,255,240,240,240,240
        BYTE    231,231,231,224,224,255,255,255
        BYTE    255,255,255,7,7,231,231,231
        BYTE    255,255,255,255,255,255,0,0
        BYTE    255,255,255,224,224,231,231,231
        BYTE    231,231,231,0,0,255,255,255
        BYTE    255,255,255,0,0,231,231,231
        BYTE    231,231,231,7,7,231,231,231
        BYTE    63,63,63,63,63,63,63,63
        BYTE    31,31,31,31,31,31,31,31
        BYTE    248,248,248,248,248,248,248,248
        BYTE    0,0,255,255,255,255,255,255
        BYTE    0,0,0,255,255,255,255,255
        BYTE    0,88,154,124,24,24,36,36
        BYTE    252,252,252,252,252,252,0,0
        BYTE    255,255,255,255,15,15,15,15
        BYTE    0,0,0,0,0,0,0,0
        BYTE    0,88,154,124,24,24,36,36
        BYTE    24,8,24,60,90,24,36,36
        BYTE    0,24,24,60,60,24,24,24


*=$3000
; Truck right
 BYTE 170,170,0
 BYTE 170,170,160
 BYTE 175,254,144
 BYTE 191,255,144
 BYTE 191,255,144
 BYTE 191,255,169
 BYTE 191,255,170
 BYTE 170,170,170
 BYTE 85,169,86
 BYTE 65,85,5
 BYTE 60,84,240
 BYTE 60,0,240
 BYTE 60,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Truck right 2
 BYTE 0,0,0
 BYTE 170,170,0
 BYTE 170,170,160
 BYTE 175,254,144
 BYTE 191,255,144
 BYTE 191,255,144
 BYTE 191,255,169
 BYTE 191,255,170
 BYTE 170,170,170
 BYTE 85,169,86
 BYTE 125,85,245
 BYTE 60,84,240
 BYTE 60,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Truck right 3
 BYTE 170,170,0
 BYTE 170,170,160
 BYTE 175,254,144
 BYTE 191,255,144
 BYTE 191,255,144
 BYTE 191,255,169
 BYTE 191,255,170
 BYTE 170,170,170
 BYTE 85,169,86
 BYTE 125,85,245
 BYTE 60,84,240
 BYTE 60,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; 3/4 Truck
 BYTE 0,0,170
 BYTE 0,2,170
 BYTE 0,10,170
 BYTE 0,42,170
 BYTE 0,170,138
 BYTE 2,170,10
 BYTE 10,168,10
 BYTE 42,160,10
 BYTE 42,160,43
 BYTE 21,224,175
 BYTE 21,226,144
 BYTE 42,170,64
 BYTE 170,169,0
 BYTE 170,164,0
 BYTE 105,128,0
 BYTE 170,192,0
 BYTE 243,192,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Man
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,128,0
 BYTE 2,0,0
 BYTE 1,0,0
 BYTE 1,1,0
 BYTE 50,5,0
 BYTE 6,16,0
 BYTE 2,80,0
 BYTE 1,0,0
 BYTE 5,0,0
 BYTE 16,0,0
 BYTE 80,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Taco
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,41,128
 BYTE 0,175,224
 BYTE 1,186,168
 BYTE 10,234,152
 BYTE 11,170,168
 BYTE 11,154,168
 BYTE 11,170,104
 BYTE 10,170,168
 BYTE 2,170,160
 BYTE 0,154,0
 BYTE 0,160,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; CrapBurger
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,15,192
 BYTE 0,63,240
 BYTE 0,255,248
 BYTE 0,255,172
 BYTE 3,250,252
 BYTE 2,175,240
 BYTE 3,255,0
 BYTE 0,240,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; HotDog
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,60
 BYTE 0,3,252
 BYTE 0,63,234
 BYTE 0,254,190
 BYTE 0,235,252
 BYTE 2,191,252
 BYTE 2,191,240
 BYTE 0,255,0
 BYTE 0,240,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; left brace
 BYTE 128,0,0
 BYTE 128,0,0
 BYTE 160,0,0
 BYTE 168,0,0
 BYTE 160,0,0
 BYTE 128,0,0
 BYTE 128,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; left brace
 BYTE 8,0,0
 BYTE 8,0,0
 BYTE 40,0,0
 BYTE 168,0,0
 BYTE 40,0,0
 BYTE 8,0,0
 BYTE 8,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; tribuild
 BYTE 0,0,0
 BYTE 0,63,252
 BYTE 0,213,92
 BYTE 3,85,124
 BYTE 13,85,252
 BYTE 42,170,204
 BYTE 46,230,252
 BYTE 42,170,252
 BYTE 38,238,204
 BYTE 42,170,252
 BYTE 46,230,252
 BYTE 42,170,236
 BYTE 37,94,252
 BYTE 21,126,252
 BYTE 85,125,92
 BYTE 68,117,124
 BYTE 85,116,112
 BYTE 100,117,112
 BYTE 85,116,64
 BYTE 68,112,0
 BYTE 85,64,0
 BYTE 0

; farm
 BYTE 0,0,0
 BYTE 0,42,168
 BYTE 0,170,174
 BYTE 0,245,127
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,32
 BYTE 0,128,56
 BYTE 2,160,28
 BYTE 9,176,0
 BYTE 7,112,0
 BYTE 5,168,0
 BYTE 6,170,0
 BYTE 9,171,0
 BYTE 165,111,170
 BYTE 145,31,136
 BYTE 23,92,0
 BYTE 23,80,0
 BYTE 0,0,0
 BYTE 0

; lots of houses
 BYTE 8,0,48
 BYTE 0,0,20
 BYTE 16,32,0
 BYTE 48,112,160
 BYTE 0,8,114
 BYTE 0,43,3
 BYTE 168,20,0
 BYTE 234,0,8
 BYTE 213,2,42
 BYTE 29,10,181
 BYTE 0,42,197
 BYTE 0,187,192
 BYTE 0,255,0
 BYTE 0,252,168
 BYTE 0,2,170
 BYTE 2,10,169
 BYTE 10,143,245
 BYTE 38,204,197
 BYTE 29,207,244
 BYTE 29,0,0
 BYTE 0,0,0
 BYTE 0

; apartments
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 1,85,80
 BYTE 7,255,112
 BYTE 31,253,240
 BYTE 85,87,112
 BYTE 68,71,240
 BYTE 85,87,48
 BYTE 116,71,240
 BYTE 85,87,176
 BYTE 68,103,240
 BYTE 85,87,112
 BYTE 103,71,240
 BYTE 85,87,53
 BYTE 68,71,215
 BYTE 85,87,235
 BYTE 70,71,40
 BYTE 87,84,0
 BYTE 0

; Truck Drive Frame 1
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 10,170,160
 BYTE 6,170,168
 BYTE 5,170,170
 BYTE 37,191,250
 BYTE 169,191,250
 BYTE 170,191,250
 BYTE 106,170,170
 BYTE 25,90,86
 BYTE 55,213,125
 BYTE 3,192,60
 BYTE 3,192,60
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Truck Drive Frame 2
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 10,170,160
 BYTE 6,170,168
 BYTE 5,170,170
 BYTE 37,191,250
 BYTE 169,191,250
 BYTE 170,191,250
 BYTE 106,170,170
 BYTE 25,90,86
 BYTE 55,213,125
 BYTE 3,192,60
 BYTE 3,192,60
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Truck Drive Frame 3
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 10,170,160
 BYTE 6,170,168
 BYTE 5,170,170
 BYTE 37,191,250
 BYTE 169,191,250
 BYTE 170,191,250
 BYTE 106,170,170
 BYTE 25,90,86
 BYTE 52,21,65
 BYTE 63,195,252
 BYTE 3,192,60
 BYTE 3,192,60
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Truck Drive Frame 4
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 10,170,160
 BYTE 6,170,168
 BYTE 5,170,170
 BYTE 37,191,250
 BYTE 169,191,250
 BYTE 170,191,250
 BYTE 106,170,170
 BYTE 25,90,86
 BYTE 7,213,125
 BYTE 3,192,60
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Car Drive Frame 1
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,170,128
 BYTE 1,170,160
 BYTE 41,106,168
 BYTE 170,102,104
 BYTE 170,170,168
 BYTE 42,170,168
 BYTE 15,40,240
 BYTE 15,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Car Drive Frame 1
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,170,128
 BYTE 1,170,160
 BYTE 41,106,168
 BYTE 170,102,104
 BYTE 170,170,168
 BYTE 42,170,168
 BYTE 15,40,240
 BYTE 15,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Car Drive Frame 1
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,170,128
 BYTE 1,170,160
 BYTE 41,106,168
 BYTE 170,102,104
 BYTE 170,170,168
 BYTE 42,170,168
 BYTE 60,43,192
 BYTE 15,0,240
 BYTE 15,0,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; Car Drive Frame 1
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,170,128
 BYTE 1,170,160
 BYTE 41,106,168
 BYTE 170,102,104
 BYTE 170,170,168
 BYTE 42,170,168
 BYTE 15,40,240
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0

; boom
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,0,0
 BYTE 0,8,0
 BYTE 8,8,0
 BYTE 0,195,0
 BYTE 1,199,0
 BYTE 45,212,0
 BYTE 11,92,0
 BYTE 15,127,0
 BYTE 3,183,32
 BYTE 161,117,0
 BYTE 15,243,192
 BYTE 13,112,192
 BYTE 60,20,0
 BYTE 48,52,0
 BYTE 0,60,128
 BYTE 10,4,128
 BYTE 8,12,0
 BYTE 0,12,0
 BYTE 0,12,0
 BYTE 0

; 10 SYS (26112)

*=$0801

        BYTE    $0E, $08, $0A, $00, $9E, $20, $28,  $32, $36, $31, $31, $32, $29, $00, $00, $00

;Set variables;
Price           byte 4
PriceHi         byte 0
CashCount       byte 0
CashCountHi     byte 0
PassCount       byte 0
PassCountHi     byte 0
LineCount       byte 0
LineCountHi     byte 0
SaleCount       byte 0
SaleCountHi     byte 0
LeftCount       byte 0
LeftCountHi     byte 0
PopCount        byte 60
PopCountHi      byte 0
VisitCount      byte 0
VisitCountHi    byte 0
ManFrame        byte $7f
angryFrame      byte $7e
eatFrame        byte $79
linepos         byte $1D,$1E,$1F,$20,$21,$22,$23,$24,$25
div_lo          byte 0
div_hi          byte 0

foodcol         byte 7

CookingCnt      byte 5
BakeTimer       byte 10
TruckType       byte 1
StopInit        byte 127
StopChance      byte 127
hipsterlv       byte 5

wait    null 'in line'
pass    null 'no show'
gone    null 'toolong'
sold    null 'sold   '

truckq   null 'truck type   '
trucktp  null 'taco     burger    hotdog'
skillz   null 'assign skills'
spdtx    null 'spd'
chrtx    null 'chr'
skltx    null 'skl'
pntlft   null 'points left  '

trendlbl        null ' trendy      '
waitlbl         null 'in line 00000'
passlbl         null ' passed 00000'
gonelbl         null '   left 00000'
soldlbl         null ' served 00000'
poplbl          null 'pop          '
endday          null 'end of day'
total           null 'sold    price   total'

startPnts       byte 10
Speed           byte 0
Charz           byte 0
Skill           byte 0

speedinit       byte 12
speedcount      byte 12

timeinit        byte 8
time            byte 8

carspeedinit    byte 2
carspeed        byte 2
carlane         byte 2
lanepos         byte 80,100,124,148
travelspeed     byte 1
enemyspeed      byte 1
laneflag        byte 0
speedflag       byte 10

trendyfood      byte 1
idealprice      byte 3
idealpriceHi    byte 0

streetline      byte 6
streetlineinit  byte 6

;throw away vars
throw1  byte 0
throw2  byte 0
throw3  byte 0
throw4  byte 0
throw5  byte 0

;spriteFrameCounts
AnimateSprite1  byte 0
Sprite1Frame    byte 0
Sprite2Frame    byte 0

;Col Vars
S1Col byte 0,0
S2col byte 0,0
S3col byte 0,0
S4col byte 0,0
S5col byte 0,0
S6col byte 0,0
S7col byte 0,0
S8col byte 0,0


;joy stuff
dx byte 0
dy byte 0

;city menu
cityoptions     null '1 shop '
cityoptions2    null '2 hire '
cityoptions3    null '3 learn'
cityoptions4    null '4 setup'
cityoptions5    null '5 pub'
cityoptions6    null '6 leave'

;price text
pricetitle null 'another day another dollar'
setpricetx null 'please set your price     '

city text 'BOSTON    ','BACK BAY  ','HYDE PARK ', 'ROXBURY   ','SOUTH END ','          ' 
cityvars byte 4
neigh1 byte 80,0,4,0,3,2
neigh2 byte 100,0,3,0,2,3
neigh3 byte 60,0,6,0,8,1
neigh4 byte 75,0,3,0,3,2
neigh5 byte 0,0,0,0,0,0

;Set Constants;
scnsrt          = #$0400
SPR_ROOT        = ($3000/64)
rand            = $d41b
leavchance      = #$e6
firstguy        = $051d
Sprite1         = $07f8
Sprite1x        = $d000
Sprite1y        = $d001
Sprite2         = $07f9
Sprite2x        = $d002
Sprite2y        = $d003
Sprite3         = $07fa
Sprite3x        = $d004
Sprite3y        = $d005
Sprite4         = $07fb
Sprite4x        = $d006
Sprite4y        = $d007
Sprite5         = $07fc
Sprite5x        = $d008
Sprite5y        = $d009
Sprite6         = $07fd
Sprite6x        = $d00a
Sprite6y        = $d00b
Sprite7         = $07fe
Sprite7x        = $d00c
Sprite7y        = $d00d
Sprite8         = $07ff
Sprite8x        = $d00e
Sprite8y        = $d00f

TruckSprite     = #SPR_ROOT+14 
CarSprite       = #SPR_ROOT+18 
BoomSprite      = #SPR_ROOT+22

defm 16bitadd 
        clc
        lda /1          ;/1 is low bit for 16 bit number /2 is high bit for 16 bit number /3 is ammount to add up to 255
        adc /3
        sta /1
        bcc @go
        inc /2
        clc
@go            

        endm

defm 16bitsub 
        
        sec
        lda /1          ;/1 is low bit for 16 bit number /2 is high bit for 16 bit number /3 is ammount to subtract up to 255
        sbc /3
        sta /1
        bcs @go
        dec /2
        sec
@go            

        endm

defm conv2dec   ;http://www.melon64.com/forum/viewtopic.php?f=25&t=401&sid=0ae0df3cfc87b121fe84d14c9ef605b3&start=10
  LDY /2        ;2 is the high bite for a number (set to #0 if not used)
  LDX /1        ;1 is the low bite of a number 
  STX div_lo
  STY div_hi
  LDY #$04
@next
  JSR @div10
  ORA #$30
  STA /3,Y      ;3 is the screen location to load the text (5numbers)
  DEY
  BPL @next
  jmp @macend

@div10
  LDX #$11
  LDA #$00
  CLC
@loop
  ROL
  CMP #$0A
  BCC @skip
  SBC #$0A
  CLV
@skip
  ROL div_lo
  ROL div_hi
  DEX
  BNE @loop
  RTS
@macend
        endm

defm printatx
        ldx #0
@loop   lda /1,x         ;1 is memory location of string to print
        sta /2,x         ;2 is memory screen location to print
        inx
        cpx #/3
        bne @loop 
        endm

defm conv2dec8bit   ;http://www.melon64.com/forum/viewtopic.php?f=25&t=401&sid=0ae0df3cfc87b121fe84d14c9ef605b3&start=10
  LDY #0        ;2 is the high bite for a number (set to #0 if not used)
  LDX /1        ;1 is the low bite of a number 
  STX div_lo
  STY div_hi
  LDY #$04
@next
  JSR @div10
  ORA #$30
  cpy #3
  bcc @skipnum
  STA /2,Y      ;3 is the screen location to load the text (5numbers)
@skipnum  DEY
  BPL @next
  jmp @macend

@div10
  LDX #$11
  LDA #$00
  CLC
@loop
  ROL
  CMP #$0A
  BCC @skip
  SBC #$0A
  CLV
@skip
  ROL div_lo
  ROL div_hi
  DEX
  BNE @loop
  RTS
@macend
        endm

defm    drawshop
  lda #$70
  sta /1
  lda #$72
  sta /1+1
  lda #$6e
  sta /1+2
  lda #$6b
  sta /1+40
  lda #$5b
  sta /1+41
  lda #$73
  sta /1+42
  lda #$6d
  sta /1+80
  lda #$71
  sta /1+81
  lda #$7d
  sta /1+82

        endm

*=$6600 
        LDA #$6F        ;This Part initalized noise channel for random
        LDY #$81        ;and lets us use lda $d41b to grab a random num
        LDX #$FF        ;between 0-255
        STA $D413 
        STY $D412 
        STX $D40E 
        STX $D40F 
        STX $D414 
       
        jsr $e544       ;clear screen
        lda $d018      ; this part sets the charset memory location (thanks dustlayer.com)
        ora #$0e
        sta $d018       ;set char rom to $3800 and leave screen ram default
        lda #0              ;set border colour
        sta $D020
        lda #11         ;set background colour
        sta $D021
        lda #7
        sta $d027       ;storesprite1 colour
        sta $d028       ;storesprite2 colour
        lda #%00000001  
        sta $d015       ;turn on sprites
        lda #SPR_ROOT+8         ;load sprite of left pointing
        sta $07f8
        lda #70+64
        sta $d002
        lda #86
        sta $d003
        lda #SPR_ROOT+9         ;load sprite of right pointing
        sta $07f9
        lda #70
        sta $d000
        lda #90
        sta $d001

        ldx #0
        lda #15
colfil  sta $d800,x                     ;fill color drkgry
        sta $d900,x
        sta $da00,x
        sta $dae8,x
        dex
        bne colfil

mainwrd ldx #0
@loop   lda truckq,x
        sta $042A,x         
        lda skillz,x
        sta $0592,x         
        lda pntlft,x
        sta $074A,x         
        inx
        cpx #13
        bne @loop 

sklwrd  ldx #0
@loop   lda spdtx,x
        sta $0612,x         
        lda chrtx,x
        sta $0612+80,x         
        lda skltx,x
        sta $0612+160,x         
        inx
        cpx #3
        bne @loop 

trktyp  ldx #0
@loop   lda trucktp,x
        sta $04d0,x  
        inx
        cpx #25
        bne @loop 

        lda #$ff 
        sta $dc02


truckLoop
@readKey jsr $ffe4       ; read key
        beq @readKey
        cmp #$1D        ; right arrow
        bne @next
        lda TruckType
        cmp #3
        beq @readKey
        inc TruckType
        
        ldy #80
@loopr  inc $d000
        inc $d000
        ldx #00
        jsr delayy
        dey
        dey
        bne @loopr
        jmp truckLoop
@next   cmp #$9D        ;left arrow
        bne @last
        lda TruckType
        cmp #1
        beq @readKey
        dec TruckType
        ldy #80
@loopl  dec $d000
        dec $d000
        ldx #00
        jsr delayy
        dey
        dey
        bne @loopl
        jmp truckLoop
@last   cmp #$0D        ;enter
        bne truckLoop
        ldx #8
        lda $d000
        LSR a
        LSR a
        LSR a
        tay
@loopcl lda #%10000000
        eor $04C6,y
        sta $04C6,y
        iny
        dex
        bne @loopcl
        lda #154
        sta $d001
        lda #88
        sta $d000

        lda #1
        sta throw1
showstats
        conv2dec8bit     Speed,$0613
        conv2dec8bit     Charz,$0663
        conv2dec8bit     Skill,$06B3
        conv2dec8bit     startPnts,$0753
statsloop
@readkey jsr $ffe4       ; read key
        beq @readKey
        cmp #$1D        ;right arrow
        bne @left
        lda startPnts
        cmp #0
        beq @readkey
        ldx throw1
        lda startPnts,x
        cmp #10
        beq @readkey
        inc startPnts,x
        dec startPnts
        jmp showstats

@left   cmp #$9D        ;left arrow
        bne @enter
        ldx throw1
        lda startPnts,x
        cmp #0
        beq @readkey
        dec startPnts,x
        inc startPnts
        jmp showstats

@enter  cmp #$0D        ;enter
        bne @up
        jmp citystart

@up     cmp #$91       ;up arrow
        bne @down
        lda throw1
        cmp #1
        beq statsloop
        dec throw1
        lda $d001
        sbc #16
        sta $d001
        jmp showstats

@down   cmp #$11        ;down arrow
        bne statsloop
        lda throw1
        cmp #3
        beq statsloop
        inc throw1
        lda $d001
        adc #16
        sta $d001
        jmp showstats

forever jmp forever

delayy  lda     $d012
        cmp     #$ff
        bne     delayy
        rts

citystart jsr $e544       ;clear screen
        lda #12              ;set border colour
        sta $D020
        lda #0         ;set background colour
        sta $D021
        lda #12          ;set global sprite colour 1
        sta $d025
        lda #11         ;set global sprite colour 2
        sta $d026
        lda #2
        sta $d027       ;storesprite0 colour
        lda #5
        sta $d028       ;storesprite1 colour
        lda #3
        sta $d029       ;storesprite2 colour
        lda #6
        sta $d02a       ;storesprite3 colour
        lda #8
        sta $d02b       ;storesprite4 colour
        lda #4
        sta $d02c       ;storesprite5 colour
        lda #13
        sta $d02d       ;storesprite6 colour
        lda #10
        sta $d02e       ;storesprite7 colour
        lda #%11111111  
        sta $d015       ;turn on sprites
        sta $d01c       ;set sprite mode
        lda #0  
        sta $d01d      ;sprite vert horz
        lda #%11111110  
        sta $d017       ;sprite vert strech
        sta $d01b       ;set sprite behind text
        ldx #0
        lda #SPR_ROOT+0         ;load sprite of left pointing
        sta $07f8
        lda #SPR_ROOT+10        ;load sprite of right pointing
        sta $07f9
        lda #SPR_ROOT+13        ;load sprite of right pointing
        sta $07fa
        lda #SPR_ROOT+10        ;load sprite of right pointing
        sta $07fb
        lda #SPR_ROOT+10         ;load sprite of left pointing
        sta $07fc
        lda #SPR_ROOT+13        ;load sprite of right pointing
        sta $07fd
        lda #SPR_ROOT+13        ;load sprite of right pointing
        sta $07fe
        lda #SPR_ROOT+12        ;load sprite of right pointing
        sta $07ff

        
        lda #12
colfil3  sta $d800,x                     ;fill color black
        sta $d900,x
        sta $da00,x
        sta $dae8,x
        dex
        bne colfil3

bar1    ldx     #25             ;number of times to run
        lda     #00
        sta     $fb             ;set zero page for start location
        lda     #$07            ;set high bit for start location
        sta     $fc
        ldy     #$dd            ;set low bit for start location
@walkby sec                     ;set Carry for some math later
        lda     #$e0            ;load " " into acc
        sta     ($fb),y         ;load it at the bottom of screen
        tya                     ;transfer y to accumulator then
        sbc     #40             ;subtract 40 (one line)
        tay                     ;save acc in y
        bcc     @nxtbl           ;if math cleared carry we need to move up one high bit
@wlkrtn  
        dex                     
        bne     @walkby          ;next loop
        jmp     @next       
@nxtbl   dec     $fc             ;decrease high bit for screen location
        sec
        jmp     @wlkrtn
@next
        lda #20
        sta $d000
        lda #50
        sta $d004
        adc #33
        sta $d002
        lda #90
        sta $d006
        adc #26
        sta $d008
        lda #180
        sta $d00a
        adc #30
        sta $d00c
        lda #150
        sta $d00e
        
        
        lda #60
        sta $d001
        lda #150
        sta $d003
        sta $d005
        lda #80
        sta $d007
        sta $d009
        lda #110
        sta $d00b
        sta $d00d
        lda #180
        sta $d00f
        
        ldx #0
cityloop lda city,x
        sta $0536,x
        inx
        cpx #9
        bne cityloop
        ldx #0
menuloop lda cityoptions,x
        cmp #0
        bne @cont
        jmp choice
@cont   sta $0585,x
        lda cityoptions2,x
        sta $05D5,x
        lda cityoptions3,x
        sta $0625,x
        lda cityoptions4,x
        sta $0675,x
        lda cityoptions5,x
        sta $06C5,x
        lda cityoptions6,x
        sta $0715,x
        inx
        jmp menuloop
choice 
        lda #$41
        sta $0447
        conv2dec8bit     time,$0446
        lda #$3a
        sta $044b
        lda #$30
        sta $044c
        sta $044d
        drawshop $0760

        lda time
        cmp #23
        bne input
        jsr $e544
        lda #%00000001  
        sta $d015
        ldy #255
zeds    ldx rand
@comp   cpx #80
        bcc @cont
        txa
        sbc #80
        tax
        jmp @comp
@cont        lda #$9a
        sta $0568,x
        inc $d968,x
@delay  ldx #2
@delayloop lda     $d012
        cmp     #$ff
        bne     @delayloop
        dex
        bne @delayloop
        dey
        bne zeds
        lda timeinit
        sta time
        jmp citystart
        

input   jsr $ffe4       ; read key
        beq input
        cmp #$31        ; return key
        beq shop
        cmp #$32
        beq hire
        cmp #$33
        beq school
        cmp #$34
        beq setup
        cmp #$35
        beq hittheroad
        jmp input

shop    ldx #11
@loop   lda #%10000000
        eor $0584,x
        sta $0584,x
        dex
        bne @loop
        inc time
@delay  ldx #30
@delayloop lda     $d012
        cmp     #$ff
        bne     @delayloop
        dex
        bne @delayloop
        ldx #11
@loop2  lda #%10000000
        eor $0584,x
        sta $0584,x
        dex
        bne @loop2
        jmp choice

hire    ldx #10
@loop   lda #%10000000
        eor $05D4,x
        sta $05D4,x
        dex
        beq input
        jmp @loop

school  ldx #10
@loop   lda #%10000000
        eor $0624,x
        sta $0624,x
        dex
        beq input
        jmp @loop

hittheroad ldx #10
@loop   lda #%10000000
        eor $06C4,x
        sta $06C4,x
        dex
        beq input
        jmp @loop

setup   ldx #10
@loop   lda #%10000000
        eor $0674,x
        sta $0674,x
        dex
        beq @delay
        jmp @loop
        
@delay  ldx #30
@delayloop lda     $d012
        cmp     #$ff
        bne     @delayloop
        dex
        bne @delayloop

        ldx #10
@loop2   lda city + 9,x
        sta $0585,x
        lda city + 19,x
        sta $05D5,x
        lda city + 29,x
        sta $0625,x
        lda city + 39,x
        sta $0675,x
        lda city + 49,x
        sta $06C5,x
        cpx #0
        dex
        bne @loop2

input2  jsr $ffe4       ; read key
        beq input2
        ldx #1
        cmp #$31        ; 1 key
        beq setnay
        ldy #1
        cpy cityvars
        beq input2
        inx
        cmp #$32
        beq setnay
        iny
        cpy cityvars
        beq input2
        inx
        cmp #$33
        beq setnay 
        iny
        cpy cityvars
        beq input2
        inx
        cmp #$34
        beq setnay 
        iny
        cpy cityvars
        beq input2
        inx
        cmp #$35
        beq setnay
        jmp input2
nay3set   lda neigh3
        sta PopCount
        lda neigh3+1
        sta PopCountHi
        lda neigh3+2
        sta idealprice
        lda neigh3+3
        sta idealpriceHi
        lda neigh3+4
        sta hipsterlv
        lda neigh3+5
        sta trendyfood
        jmp setprice
nay4set   lda neigh4
        sta PopCount
        lda neigh4+1
        sta PopCountHi
        lda neigh4+2
        sta idealprice
        lda neigh4+3
        sta idealpriceHi
        lda neigh4+4
        sta hipsterlv
        lda neigh4+5
        sta trendyfood
        jmp setprice
setnay cpx #1
        beq nay1set
        cpx #2
        beq nay2set
        cpx #3
        beq nay3set
        cpx #4
        beq nay4set
        lda neigh5
        sta PopCount
        lda neigh5+1
        sta PopCountHi
        lda neigh5+2
        sta idealprice
        lda neigh5+3
        sta idealpriceHi
        lda neigh5+4
        sta hipsterlv
        lda neigh5+5
        sta trendyfood
        jmp setprice
nay1set   lda neigh1
        sta PopCount
        lda neigh1+1
        sta PopCountHi
        lda neigh1+2
        sta idealprice
        lda neigh1+3
        sta idealpriceHi
        lda neigh1+4
        sta hipsterlv
        lda neigh1+5
        sta trendyfood
        jmp setprice
nay2set   lda neigh2
        sta PopCount
        lda neigh2+1
        sta PopCountHi
        lda neigh2+2
        sta idealprice
        lda neigh2+3
        sta idealpriceHi
        lda neigh2+4
        sta hipsterlv
        lda neigh2+5
        sta trendyfood
        jmp setprice

setprice jsr $e544
        lda #%00000000
        sta $d015       ;turn off sprites
        ldx #0
@loop   lda pricetitle,x                      ;adds words
        cmp #0
        beq shownum
        sta scnsrt+601,x
        lda setpricetx,x
        sta scnsrt+641,x
        inx
        bne @loop
shownum
        conv2dec8bit     Price,$06b1
@priceloop
@readkey jsr $ffe4       ; read key
        beq @readKey
@enter  cmp #$0D        ;enter
        bne @up
        jmp sellinit

@up     cmp #$91       ;up arrow
        bne @down
        lda Price
        cmp #99
        beq @readkey
        inc Price
        jmp shownum

@down   cmp #$11        ;down arrow
        bne @priceloop
        lda Price
        cmp #0
        beq @readkey
        dec Price
        jmp shownum


sellinit 
        lda     speedinit
        sbc     Speed
        sta     speedcount
        sta     BakeTimer       ;init bake speed

sellstylez

setfood lda trendyfood                ;load trendy number
        cmp #2
        beq @burg         ;and assign the sprite for it
        cmp #3
        beq @dogs
        lda #7
        sta $D02A
        jmp setcolfood
@burg   lda #8
        sta $D02A
        jmp setcolfood
@dogs   lda #2
        sta $D02A

setcolfood lda TruckType
        cmp trendyfood
        bne @cont
        lsr StopChance
@cont   cmp #1
        beq @taco
        cmp #2
        beq @burg
        lda #2
        sta foodcol       ;storesprite3 colour
        jmp sellstart
@taco   lda #7
        sta foodcol       ;storesprite3 colour
        jmp sellstart
@burg   lda #8
        sta foodcol       ;storesprite3 colour
        

sellstart jsr $e544       ;clear screen4
        lda #0              ;set border colour
        sta $D020
        lda #12         ;set background colour
        sta $D021
        lda #1          ;set global sprite colour 1
        sta $d025
        lda #9         ;set global sprite colour 2
        sta $d026
        lda #5
        sta $d028       ;storesprite1 colour
        lda #3
        sta $d029       ;storesprite2 colour
        lda foodcol
        sta $d027       ;storesprite3 colour
        lda #%00001111  
        sta $d015       ;turn on sprites
        sta $d01c       ;set sprite mode
        sta $d01b       ;set sprite behind text
        lda #%00001101  ;set sprite size
        sta $d017
        lda #%00000100  ;set sprite size
        sta $d01d
        lda #SPR_ROOT+3         ;load sprite of food
        adc TruckType
        sta $07F8
        lda #50
        sta $d000
        lda #56
        sta $d001
        lda #SPR_ROOT+4         ;load sprite of vendor
        sta $07f9
        lda #64
        sta $d002
        lda #86
        sta $d003
        lda #SPR_ROOT+3         ;load sprite of truck (they overlap to make a nicer sprite)
        sta $07fa
        lda #40
        sta $d004
        asl 
        sta $d005
        lda trendyfood
        sta $0400
        lda #SPR_ROOT+4         ;load sprite of trending food
        adc trendyfood
        sta $07FB
        lda #90
        sta $d006
        lda #140 
        sta $d007

        ldx #0
        lda #1
colfil2 sta $d800,x                     ;fill color ram white
        sta $d900,x
        sta $da00,x
        sta $dae8,x
        dex
        bne colfil2
        ldx    #20
        lda #$60 
linestart 
        sta     firstguy,x              ;make sure line is spaces
        dex
        bne linestart
        ldx #0
write   lda trendlbl,x                      ;adds words
        sta scnsrt+601,x
        lda passlbl,x                      
        sta scnsrt+681,x
        lda waitlbl,x
        sta scnsrt+761,x
        lda soldlbl,x
        sta scnsrt+841,x
        lda gonelbl,x
        sta scnsrt+921,x
        lda poplbl,x
        sta scnsrt+20,x
        inx
        cpx #7
        bne write
                
newcust 
        lda #0              ;set border colour
        sta $D020
        lda VisitCountHi
        cmp PopCountHi
        bne cyclestart
        lda VisitCount
        cmp PopCount
        bne cyclestart
        jmp summary
cyclestart
        16bitadd VisitCount, VisitCountHi, #1
        conv2dec        PassCount,PassCountHi,$06B1     ;update pass count
        conv2dec        LineCount,LineCountHi,$0701     ;update inline count
        conv2dec        SaleCount,SaleCountHi,$0751     ;update sale count
        conv2dec        LeftCount,LeftCountHi,$07A1     ;update angry count
        conv2dec        VisitCount,VisitCountHi,$0422-10   ;update number of people
        conv2dec        PopCount,PopCountHi,$0422-20   ;update number of people
        
        ldx     #17             ;number of times to run
        lda     #00
        sta     $fb             ;set zero page for start location
        lda     #$07            ;set high bit for start location
        sta     $fc
        ldy     #$e3            ;set low bit for start location
        sec                     ;set Carry for some math later
walkby  txs                     ;save x for when jsr returns
        jsr     delay2          ;slow it down so we can see it
        tsx                     ;load x back into x
        lda     #%10000000      ;reverse char mask
        eor     ManFrame        ;flip bit 8 for ManFrame
        sta     ManFrame        ;save it back on ManFrame
        lda     #$60            ;load " " into acc
        sta     ($fb),y         ;load it at the bottom of screen
        tya                     ;transfer y to accumulator then
        sbc     #40             ;subtract 40 (one line)
        tay                     ;save acc in y
        bcc     nxtbl           ;if math cleared carry we need to move up one high bit
wlkrtn  lda     ManFrame        ;otherwise we are good to place next man frame
        sta     ($fb),y         ;at this screen location
        dex                     
        bne     walkby          ;next loop
        jmp     checkstop       
nxtbl   dec     $fc             ;decrease high bit for screen location
        sec
        jmp     wlkrtn

checkstop   
        lda     rand   ;do they stop?
        cmp     StopChance
        bcc     leave

lineup  lda     #9             ;set line max size
        cmp     LineCount       ;check if line full
        bcc     leave           ;if so leave
        inc     LineCount       ;if not inc linecount
        lda     #30            ;distance to start of line
        sbc     LineCount       ;less number of people in line
        tax                     ;set number of loops
        ldy     #30             ;set travel distance
linelp  txs                     ;save x for when jsr returns
        jsr     delay2          ;slow it down so we can see it
        tsx                     ;load x back into x
        lda     #%10000000      ;reverse char mask
        eor     ManFrame        ;flip bit 8 for ManFrame
        sta     ManFrame        ;save it back on ManFrame
        lda     #$60            ;load " " into acc
        sta     firstguy,y         ;store at line start +y
        lda     ManFrame        ;load Man Chr into acc
        dey
        sta     firstguy,y         ;store at line start +y
        dex
        bne     linelp
        
        jmp     sold2


        
leave   inc     PassCount
        ldx     #7             ;number of times to run
        lda     #00
        sta     $fb             ;set zero page for start location
        lda     #$05            ;set high bit for start location
        sta     $fc
        ldy     #$3B            ;set low bit for start location
        sec                     ;set Carry for some math later
leaving txs                     ;save x for when jsr returns
        jsr     delay2          ;slow it down so we can see it
        tsx                     ;load x back into x
        lda     #%10000000      ;reverse char mask
        eor     ManFrame        ;flip bit 8 for ManFrame
        sta     ManFrame        ;save it back on ManFrame
        lda     #$60            ;load " " into acc
        sta     ($fb),y         ;load it at the bottom of screen
        tya                     ;transfer y to accumulator then
        sbc     #40             ;subtract 40 (one line)
        tay                     ;save acc in y
        bcc     nxtll           ;if math cleared carry we need to move up one high bit
lvertn  lda     ManFrame        ;otherwise we are good to place next man frame
        sta     ($fb),y         ;at this screen location
        dex                     
        bne     leaving          ;next loop
        jsr     delay2
        lda     #$60
        sta     $0423
        jmp     sold2       
nxtll   dec     $fc             ;decrease high bit for screen location
        sec
        jmp     lvertn

gomad   jmp     angry        

sold2   ldx     #0
        lda     firstguy+1         ;grab character at line pos 1
        cmp     #$60            ;check if it's a space
        beq     gomad
        dec     BakeTimer
        bne     gomad
        lda     Skill
        cmp     #3
        bcs     @cont
        lda     StopChance
        cmp     #$EF
        bcc     @cont
        inc     StopChance
@cont   inc     SaleCount
        dec     LineCount
        conv2dec        SaleCount,SaleCountHi,$0751     ;update sale count
        lda     #00
        sta     $fb             ;set zero page for start location
        lda     #$05            ;set high bit for start location
        sta     $fc
        lda     #00
        sta     $f9             ;set zero page for start location
        lda     #$d9            ;set high bit for start location
        sta     $fa
        ldy     #$1E            ;set low bit for start location
        clc                     ;clear Carry for some math later
        lda     eatFrame
        sta     ($fb),y
        lda     #5
        sta     ($f9),y
        lda     #$7A            ;this bit stores yum on screen
        sta     $04f7
        lda     #$7B
        sta     $04f8
        txs                     ;save x for when jsr returns
        ldx     #$50
        jsr     delayx          ;slow it down so we can see it
        lda     #1
        sta     ($f9),y
        tsx                     ;load x back into x
        lda     #$60            ;this bit clears yum on screen
        sta     $04f7
        sta     $04f8
sldexit txs                     ;save x for when jsr returns
        jsr     delay2          ;slow it down so we can see it
        tsx                     ;load x back into x
        lda     #%10000000      ;reverse char mask
        eor     eatFrame        ;flip bit 8 for eatFrame
        sta     eatFrame        ;save it back on eatFrame
        lda     #$60            ;load " " into acc
        sta     ($fb),y         ;load it at the start position
        tya                     ;transfer y to accumulator then
        adc     #38             ;subtract 39
        tay                     ;save acc in y
        bcs     inline           ;if math cleared carry we need to move up one high bit
sldrtn  lda     eatFrame        ;otherwise we are good to place next man frame
        sta     ($fb),y         ;at this screen location
        inx                     
        cpx     #6
        bne     sldexit          ;next loop
        lda     speedcount           
        sta     BakeTimer       ;init bake speed
        jsr     delay2
        lda     #$60
        sta     $0608
        jmp     linefix     
inline  inc     $fc             ;decrease high bit for screen location
        clc
        jmp     sldrtn
        

linefix ldx     #1              ;reset x      here we are fixing the line of missing jerks 
        ldy     #0
        lda     #5
lnlp    lda     firstguy,x         ;grab character at line pos 1
        cmp     #96            ;check if it's a space
        beq     nxtdude
nxtln   inx     
        cmp     #11
        bne     lnlp
        jmp     goback
nxtdude lda     $051E,x         ;grab char in next spot
        cmp     #96            ;check if it's a space (two spaces mean no more blanks)
        beq     goback        ;if so do a new customer
        sta     firstguy,x        ;otherwise move one to new spot
        lda     #96            ;load " "
        sta     $051E,x        ;and replace copy
        jmp     nxtln
goback  jmp     newcust

angry   ldx     #4              ;reset x        here we are checking if they mad 
        ldy     #0
lvelp   lda     firstguy,x         ;grab character at line pos 1
        cmp     #96            ;check if it's a space
        beq     linefix   
        lda     rand
        cmp     #$20
        bcc     gonedy
        inx     
        cpx     #10
        bne     lvelp
        jmp     linefix



gonedy  dec     LineCount       ;lower line count
        inc     LeftCount
        lda     StopChance
        cmp     #$EF
        bcc     @cont
        inc     StopChance
@cont   lda     #00
        sta     $fb             ;set zero page for start location
        lda     #$05            ;set high bit for start location
        sta     $fc
        lda     #00
        sta     $f9             ;set zero page for start location
        lda     #$d9            ;set high bit for start location
        sta     $fa
        ldy     linepos,x            ;set low bit for start location
        sec                     ;set Carry for some math later
        lda     angryFrame
        sta     ($fb),y
        lda     #%10000000      ;reverse char mask
        eor     angryFrame      ;flip bit 8 for angryman
        sta     angryFrame      ;save it back on angryman
        lda     #2
        sta     ($f9),y
        tya                     ;transfer y to accumulator then
        sbc     #39             ;subtract 39 (up and right one)
        tay
        bcc     decline           ;if math cleared carry we need to move up one high bit
gnrtn   lda     #124            ;otherwise we are good to place ug 
        sta     ($fb),y         ;at this screen location
                                ;animate angry man off screen
        txs
        ldx     #$7f
        jsr     delayx
        tsx
        lda     #$60            ;get rid of ug
        sta     ($fb),y         ;at this screen location

        ldy     linepos,x            ;set low bit for start location
        
        lda     #$05            ;set high bit for start location
        sta     $fc
        ldx     #7
        sec
gnrtn2  txs                     ;save x for when jsr returns
        jsr     delay2          ;slow it down so we can see it
        tsx                     ;load x back into x
        lda     #%10000000      ;reverse char mask
        eor     angryFrame        ;flip bit 8 for ManFrame
        sta     angryFrame        ;save it back on ManFrame
        lda     #$60            ;load " " into acc
        sta     ($fb),y         ;load it at the bottom of screen
        lda     #1
        sta     ($f9),y
        tya                     ;transfer y to accumulator then
        sbc     #40             ;subtract 40 (one line)
        tay                     ;save acc in y
        bcc     dcln2           ;if math cleared carry we need to move up one high bit
gnrtn3  lda     angryFrame        ;otherwise we are good to place next man frame
        sta     ($fb),y         ;at this screen location
        dex                     
        bne     gnrtn2          ;next loop
        jsr     delay2
        lda     #$60
        sta     ($fb),y         ;at this screen location
        jmp     linefix       
dcln2   dec     $fc             ;decrease high bit for screen location
        sec
        jmp     gnrtn3

decline dec     $fc             ;decrease high bit for screen location
        sec
        jmp     gnrtn

delay   lda     $d012
        cmp     #$ff
        bne     delay
        rts

delay2  ldx     #20
dlp     lda     $d012
        cmp     #$ff
        bne     dlp
        dex
        bne     dlp
        rts

delayx  lda     $d012
        cmp     #$ff
        bne     delayx
        dex
        bne     delayx
        rts

summary ldx #0
@write  lda endday,x                      ;adds words
        sta $0437,x
        inx
        cpx #10
        bne @write

dayttl  
        ldx #0
@write  lda total,x                      ;adds words
        sta $05c2,x
        inx
        cpx #21
        bne @write
        conv2dec        Price,#0,$05F2                  ;update price count

summath 
        conv2dec        SaleCount,SaleCountHi,$05EA     ;update sale count
        conv2dec        CashCount,CashCountHi,$05FA     ;update inline count
        lda SaleCountHi
        cmp #0
        bne @mathit
        lda SaleCount
        cmp #0
        bne @mathit
        jmp waititup
@mathit
        16bitadd        CashCount,CashCountHi,Price
        16bitsub        SaleCount,SaleCountHi,#1
        ldx #$01
        jsr delayx
        jmp summath
        
        

waititup
        jsr $ffe4       ; read key
        beq waititup
        cmp #$0D        ; return key
        bne waititup
        lda rand
        sta PopCount
        lda #0
        sta PassCount
        sta PassCountHi
        sta LineCount       
        sta LineCountHi     
        sta SaleCount       
        sta SaleCountHi     
        sta LeftCount 
        sta LeftCountHi 
        sta VisitCount
        sta VisitCountHi 
        lda speedcount           
        sta BakeTimer
        lda StopInit
        sta StopChance
        jmp citystart
        jmp waititup

DrivingStuff       
        sei        ;disable maskable IRQs

        lda #$7f
        lda #$7f                      ; turn off the cia interrupts
        sta $dc0d

        lda $dc0d  ;by reading this two registers we negate any pending CIA irqs.
        lda $dd0d  ;if we don't do this, a pending CIA irq might occur after we finish setting up our irq.
                   ;we don't want that to happen.

        lda $d01a                     ; enable raster irq
        ora #$01
        sta $d01a

        lda $d011                     ; clear high bit of raster line
        and #$7f
        sta $d011
        
        lda #240                      ; line number to go off at
        sta $d012                     ; low byte of raster line
        
        
        lda #<irq  ;this is how we set up
        sta 788                         ;the address of our interrupt code
        lda #>irq
        sta 789

        cli        ;enable maskable interrupts again
        
        
        jsr $e544       ;clear screen
        lda $d018      ; this part sets the charset memory location (thanks dustlayer.com)
        ora #$0e
        sta $d018       ;set char rom to $3800 and leave screen ram default
        lda #0              ;set border colour
        sta $D020
        lda #11         ;set background colour
        sta $D021
        lda #3
        sta $d027       ;storesprite1 colour
        lda #4
        sta $d028       ;storesprite2 colour
        lda #1
        sta $d025       ;storesharedsprite color1
        lda #9
        sta $d026       ;storesharedsprite color2
        lda #%00000011  
        sta $d015       ;turn on sprites
        sta $d01c       ;set sprite mode
        lda #%11110000
        sta $d01b       ;set sprite behind text
        lda #%00000011  ;set sprite size
        sta $d017
        lda #%00000011  ;set sprite size
        sta $d01d
        lda TruckSprite         ;load sprite of left facing truck
        sta Sprite1
        lda #200
        sta Sprite1x
        lda #150
        sta Sprite1y
        lda CarSprite         ;load sprite of right pointing
        sta Sprite2
        lda #0+24
        sta Sprite2x
        lda #100
        sta Sprite2y

        ldx #0
        lda #0
colfil4  sta $d800,x   
        lda #7                  ;fill color blk and yellow
        sta $d900,x
        sta $da00,x
        sta $dae8,x
        dex
        bne colfil4

        ldx #40
        ldy #6
drawlines 
        lda #$43
        sta $053f,x
        dey
        beq @cont1
        sta $05b7,x
        sta $062f,x
@cont2  sta $06a7,x
        dex
        cpx #0
        bne drawlines
        jmp stallout
@cont1  ldy #7
        jmp @cont2
        
stallout
        ;dec 53280
        lda carspeed
        sta $0401
        lda $d012
        cmp #$20
        bne stallout
        ldx carlane
        lda $d001
        cmp lanepos,x
        beq @resetflag
        bcs @moveup

        inc $d001
        jmp @ctrls
@resetflag lda #0
        sta laneflag
        jmp @ctrls
@moveup dec $d001 

@ctrls  
djrr    lda $dc00     ; get input from port 2 only
djrrb   ldy #0        ; this routine reads and decodes the
        ldx #0        ; joystick/firebutton input data in
        lsr           ; the accumulator. this least significant
        bcs djr0      ; 5 bits contain the switch closure
        dey           ; information. if a switch is closed then it
djr0    lsr           ; produces a zero bit. if a switch is open then
        bcs djr1      ; it produces a one bit. The joystick dir-
        iny           ; ections are right, left, forward, backward
djr1    lsr           ; bit3=right, bit2=left, bit1=backward,
        bcs djr2      ; bit0=forward and bit4=fire button.
        dex           ; at rts time dx and dy contain 2's compliment
djr2    lsr           ; direction numbers i.e. $ff=-1, $00=0, $01=1.
        bcs djr3      ; dx=1 (move right), dx=-1 (move left),
        inx           ; dx=0 (no x change). dy=-1 (move up screen),
djr3    lsr           ; dy=0 (move down screen), dy=0 (no y change).
        stx dx        ; the forward joystick position corresponds
        sty dy        ; to move up the screen and the backward
        bcc butts
        ldx dx
        ldy dy
cmpx    cpx #$01
        beq right
        cpx #$ff
        beq left
cmpy    cpy #$01
        beq down
        cpy #$ff
        beq up
        jmp checkspeed
down    lda laneflag
        bne @done
        lda carlane
        cmp #3
        bcs @done
        inc carlane
        lda #1
        sta laneflag
@done   jmp checkspeed
up      lda laneflag
        bne @done
        lda carlane
        cmp #2
        bcc @done
        dec carlane
        lda #1
        sta laneflag
@done   jmp checkspeed
right   lda $d000
        cmp #250
        bcs cmpy
        adc #$04
        sta $d000
        jmp cmpy
left   lda $d000
        sbc #$02
        cmp #150
        bcc cmpy
        sta $d000
        jmp cmpy
butts   inc $d027
        jmp cmpx

checkspeed
        lda $d012
        cmp #$60
        bne checkspeed
        ldx speedflag
        lda speedflag
        sta $0403
        dec speedflag
        dex
        bne @done
        lda #10
        sta speedflag
        lda $d000
        cmp #160
        bcs @checkback
        lda carspeed
        cmp #2
        bcc @done
        dec carspeed
        jmp stallout
@checkback cmp #240
        bcc @done
        lda carspeed
        cmp #11
        bcs @done
        inc carspeed
@done   

        lda Sprite1x
        sbc #24
        lsr a
        lsr a
        lsr a
        sta throw1
        lda Sprite1y
        lsr a
        lsr a
        lsr a
        sta throw2
@carlaunch lda Sprite2y
        lsr a
        lsr a
        lsr a
        sta throw4
carStuff
        lda #0
        sta throw3
        dec enemyspeed
        beq @notdone
        lda Sprite2x
        jmp @noflip
@notdone clc        
        lda Sprite2x
        adc #4
        sta Sprite2x
        bcc @noflip
        lda $d41b
        cmp #85
        bcc @setLane1
        cmp #170
        bcc @setLane2
        lda #100
        sta Sprite2y
        jmp @noflip
@setLane2 lda #124
        sta Sprite2y
        jmp @noflip
@setLane1 lda #148
        sta Sprite2y
@noflip lda Sprite2x
        sbc #24
        adc #32
        clc
        lsr a
        bcc @next1
        inc throw3
@next1  clc
        lsr a
        bcc @next2
        inc throw3
        inc throw3
@next2  clc
        lsr a
        bcc @next3
        inc throw3
        inc throw3
        inc throw3
        inc throw3
@next3  clc 
        sta $043f
        cmp throw1
        bne @nocrash
        lda throw4
        cmp throw2
        bne @nocrash
        jmp crash
@nocrash 
        lda throw3
        adc #$30
        sta $0410
        lda throw2
        sta $0442
        lda throw4
        sta $0443
        lda throw1
        sta $0440
@done   
        jmp stallout

crash   lda BoomSprite
        sta Sprite1
        sta Sprite2
        ldx 255
        lda $32
        sta $0500,x
        jmp crash
        
irq     lda $d019                     ; clear source of interrupts
        sta $d019
        
        lda AnimateSprite1
        cmp #10
        bne @skip              ; exit back to rom
        lda #0
        sta AnimateSprite1
        inc Sprite1Frame
        lda Sprite1Frame
        cmp #4
        bne @cont
        lda #0
        sta Sprite1Frame
        lda TruckSprite
        sta Sprite1
        lda CarSprite
        sta Sprite2
        jmp @next
@skip   inc AnimateSprite1
        jmp @next                     ; exit back to rom
@cont   inc Sprite1
        inc Sprite2

@next   dec travelspeed
        bne @done
        ldx #43
        ldy #44
@loop   lda $05b7,x
        sta throw1
        cpy #41
        bcs @cont1
        sta $05b7,y
        sta $062f,y
@cont1  dex
        dey
        bne @loop
        lda #0
        cmp streetline
        bne @line
        inc $0400
        lda streetlineinit
        sta streetline
        lda #$20
        jmp @cont2
@line   lda #$43
@cont2  sta $05b7+1
        sta $062f+1
        dec streetline
        lda carspeed
        sta travelspeed
        sta enemyspeed
@done   jmp $ea31                     ; exit back to rom

